add_row(time = ymd("2018-10-17"), weight = 209) %>%
add_row(time = ymd("2018-10-21"), weight = 208.4) %>%
add_row(time = ymd("2018-10-25"), weight = 209.4) %>%
add_row(time = ymd("2018-10-28"), weight = 208.2) %>%
add_row(time = ymd("2018-10-30"), weight = 206.6) %>%
add_row(time = ymd("2018-11-04"), weight = 207 ) %>%
add_row(time = ymd("2018-11-08"), weight = 206.2) %>%
add_row(time = ymd("2018-11-11"), weight = 205.4) %>%
add_row(time = ymd("2018-11-18"), weight = 206.8) %>%
add_row(time = ymd("2018-11-23"), weight = 206.6) %>%
add_row(time = ymd("2018-11-27"), weight = 205.6) %>%
add_row(time = ymd("2018-12-02"), weight = 204) %>%
add_row(time = ymd("2018-12-08"), weight = 203.6) %>%
add_row(time = ymd("2018-12-12"), weight = 206 ) %>%
add_row(time = ymd("2018-12-13"), weight = 203) %>%
add_row(time = ymd("2018-12-28"), weight = 215.2) %>%
add_row(time = ymd("2018-12-29"), weight = 213.6) %>%
add_row(time = ymd("2019-01-01"), weight = 210.0) %>%
add_row(time = ymd("2019-01-02"), weight = 212.6) %>%
add_row(time = ymd("2019-01-08"), weight = 209.6) %>%
add_row(time = ymd("2019-01-11"), weight = 213 ) %>%
add_row(time = ymd("2019-01-20"), weight = 214.2) %>%
add_row(time = ymd("2019-01-26"), weight = 214.8) %>%
add_row(time = ymd("2019-01-28"), weight = 214) %>%
add_row(time = ymd("2019-02-04"), weight = 213.2) %>%
add_row(time = ymd("2019-02-11"), weight = 218.2) %>%
add_row(time = ymd("2019-02-12"), weight = 213.8) %>%
add_row(time = ymd("2019-02-13"), weight = 216.6) %>%
add_row(time = ymd("2019-02-16"), weight = 218.8) %>%
add_row(time = ymd("2019-02-18"), weight = 217.4) %>%
add_row(time = ymd("2019-02-21"), weight = 217.4) %>%
add_row(time = ymd("2019-02-24"), weight = 216.8) %>%
add_row(time = ymd("2019-02-26"), weight = 217.2) %>%
add_row(time = ymd("2019-03-02"), weight = 218.4) %>%
add_row(time = ymd("2019-03-05"), weight = 216.2) %>%
add_row(time = ymd("2019-03-08"), weight = 216.2) %>%
add_row(time = ymd("2019-03-19"), weight = 218.4) %>%
add_row(time = ymd("2019-03-22"), weight = 218.4) %>%
add_row(time = ymd("2019-04-09"), weight = 218.2) %>%
add_row(time = ymd("2019-04-13"), weight = 220.6) %>%
add_row(time = ymd("2019-04-23"), weight = 218.4) %>%
add_row(time = ymd("2019-05-04"), weight = 218.2)
weights %<>%
add_row(time = ymd("2019-05-07"), weight = 99) %>%
add_row(time = ymd("2019-05-10"), weight = 98.8) %>%
add_row(time = ymd("2019-05-17"), weight = 98.6) %>%
add_row(time = ymd("2019-05-20"), weight = 98.4) %>%
add_row(time = ymd("2019-06-06"), weight = 99.2) %>%
add_row(time = ymd("2019-06-21"), weight = 99.8) %>%
add_row(time = ymd("2019-07-02"), weight = 99.9) %>%
add_row(time = ymd("2019-07-04"), weight = 100.8) %>%
add_row(time = ymd("2019-07-05"), weight = 99) %>%
add_row(time = ymd("2019-07-12"), weight = 99.7) %>%
add_row(time = ymd("2019-07-22"), weight = 100.0) %>%
add_row(time = ymd("2019-07-24"), weight = 99.4) %>%
add_row(time = ymd("2019-07-26"), weight = 99.3) %>%
add_row(time = ymd("2019-07-27"), weight = 99.7)
# Convert from lbs to kg:
weights %<>%
mutate(weight = weight/2.2046)
# start with old weights in pounds:
weights <- tibble(time = ymd("2019-01-04"), weight = 218)
weights %<>%
add_row(time = ymd("2018-01-05"), weight = 217.2) %>%
add_row(time = ymd("2018-01-11"), weight = 219) %>%
add_row(time = ymd("2018-01-14"), weight = 216.4) %>%
add_row(time = ymd("2018-01-17"), weight = 218.8) %>%
add_row(time = ymd("2018-01-21"), weight = 218.2) %>%
add_row(time = ymd("2018-01-24"), weight = 218) %>%
add_row(time = ymd("2018-01-27"), weight = 219.0) %>%
add_row(time = ymd("2018-01-28"), weight = 218.6) %>%
add_row(time = ymd("2018-02-03"), weight = 216.4) %>%
add_row(time = ymd("2018-02-05"), weight = 217.2) %>%
add_row(time = ymd("2018-02-10"), weight = 215.8) %>%
add_row(time = ymd("2018-02-11"), weight = 216.0) %>%
add_row(time = ymd("2018-02-12"), weight = 216.8) %>%
add_row(time = ymd("2018-02-13"), weight = 216.8) %>%
add_row(time = ymd("2018-02-24"), weight = 216.6) %>%
add_row(time = ymd("2018-03-04"), weight = 215.6) %>%
add_row(time = ymd("2018-03-30"), weight = 217.6) %>%
add_row(time = ymd("2018-04-02"), weight = 216.2) %>%
add_row(time = ymd("2018-04-11"), weight = 215.2) %>%
add_row(time = ymd("2018-04-18"), weight = 215.6) %>%
add_row(time = ymd("2018-04-23"), weight = 217.0) %>%
add_row(time = ymd("2018-04-29"), weight = 214.6) %>%
add_row(time = ymd("2018-05-06"), weight = 213.8) %>%
add_row(time = ymd("2018-05-12"), weight = 214.4) %>%
add_row(time = ymd("2018-05-17"), weight = 214) %>%
add_row(time = ymd("2018-05-20"), weight = 212.4) %>%
add_row(time = ymd("2018-06-03"), weight = 211.2) %>%
add_row(time = ymd("2018-06-18"), weight = 212.4) %>%
add_row(time = ymd("2018-06-27"), weight = 214.6 ) %>%
add_row(time = ymd("2018-07-01"), weight = 214.0 ) %>%
add_row(time = ymd("2018-07-06"), weight = 213.2) %>%
add_row(time = ymd("2018-07-10"), weight = 212.6 ) %>%
add_row(time = ymd("2018-07-15"), weight = 213.2) %>%
add_row(time = ymd("2018-07-18"), weight = 211.6) %>%
add_row(time = ymd("2018-07-22"), weight = 209.8) %>%
add_row(time = ymd("2018-07-28"), weight = 209.8 ) %>%
add_row(time = ymd("2018-08-07"), weight = 208.8 ) %>%
add_row(time = ymd("2018-08-16"), weight = 208.4) %>%
add_row(time = ymd("2018-08-20"), weight = 207.2) %>%
add_row(time = ymd("2018-08-31"), weight = 210.6) %>%
add_row(time = ymd("2018-09-02"), weight = 207.2) %>%
add_row(time = ymd("2018-09-05"), weight = 206.6) %>%
add_row(time = ymd("2018-09-17"), weight = 210) %>%
add_row(time = ymd("2018-09-24"), weight = 208.8 ) %>%
add_row(time = ymd("2018-09-28"), weight = 208.2) %>%
add_row(time = ymd("2018-10-03"), weight = 207.2) %>%
add_row(time = ymd("2018-10-09"), weight = 209.6 ) %>%
add_row(time = ymd("2018-10-17"), weight = 209) %>%
add_row(time = ymd("2018-10-21"), weight = 208.4) %>%
add_row(time = ymd("2018-10-25"), weight = 209.4) %>%
add_row(time = ymd("2018-10-28"), weight = 208.2) %>%
add_row(time = ymd("2018-10-30"), weight = 206.6) %>%
add_row(time = ymd("2018-11-04"), weight = 207 ) %>%
add_row(time = ymd("2018-11-08"), weight = 206.2) %>%
add_row(time = ymd("2018-11-11"), weight = 205.4) %>%
add_row(time = ymd("2018-11-18"), weight = 206.8) %>%
add_row(time = ymd("2018-11-23"), weight = 206.6) %>%
add_row(time = ymd("2018-11-27"), weight = 205.6) %>%
add_row(time = ymd("2018-12-02"), weight = 204) %>%
add_row(time = ymd("2018-12-08"), weight = 203.6) %>%
add_row(time = ymd("2018-12-12"), weight = 206 ) %>%
add_row(time = ymd("2018-12-13"), weight = 203) %>%
add_row(time = ymd("2018-12-28"), weight = 215.2) %>%
add_row(time = ymd("2018-12-29"), weight = 213.6) %>%
add_row(time = ymd("2019-01-01"), weight = 210.0) %>%
add_row(time = ymd("2019-01-02"), weight = 212.6) %>%
add_row(time = ymd("2019-01-08"), weight = 209.6) %>%
add_row(time = ymd("2019-01-11"), weight = 213 ) %>%
add_row(time = ymd("2019-01-20"), weight = 214.2) %>%
add_row(time = ymd("2019-01-26"), weight = 214.8) %>%
add_row(time = ymd("2019-01-28"), weight = 214) %>%
add_row(time = ymd("2019-02-04"), weight = 213.2) %>%
add_row(time = ymd("2019-02-11"), weight = 218.2) %>%
add_row(time = ymd("2019-02-12"), weight = 213.8) %>%
add_row(time = ymd("2019-02-13"), weight = 216.6) %>%
add_row(time = ymd("2019-02-16"), weight = 218.8) %>%
add_row(time = ymd("2019-02-18"), weight = 217.4) %>%
add_row(time = ymd("2019-02-21"), weight = 217.4) %>%
add_row(time = ymd("2019-02-24"), weight = 216.8) %>%
add_row(time = ymd("2019-02-26"), weight = 217.2) %>%
add_row(time = ymd("2019-03-02"), weight = 218.4) %>%
add_row(time = ymd("2019-03-05"), weight = 216.2) %>%
add_row(time = ymd("2019-03-08"), weight = 216.2) %>%
add_row(time = ymd("2019-03-19"), weight = 218.4) %>%
add_row(time = ymd("2019-03-22"), weight = 218.4) %>%
add_row(time = ymd("2019-04-09"), weight = 218.2) %>%
add_row(time = ymd("2019-04-13"), weight = 220.6) %>%
add_row(time = ymd("2019-04-23"), weight = 218.4) %>%
add_row(time = ymd("2019-05-04"), weight = 218.2)
# Convert from lbs to kg:
weights %<>%
mutate(weight = weight/2.2046)
weights %<>%
add_row(time = ymd("2019-05-07"), weight = 99) %>%
add_row(time = ymd("2019-05-10"), weight = 98.8) %>%
add_row(time = ymd("2019-05-17"), weight = 98.6) %>%
add_row(time = ymd("2019-05-20"), weight = 98.4) %>%
add_row(time = ymd("2019-06-06"), weight = 99.2) %>%
add_row(time = ymd("2019-06-21"), weight = 99.8) %>%
add_row(time = ymd("2019-07-02"), weight = 99.9) %>%
add_row(time = ymd("2019-07-04"), weight = 100.8) %>%
add_row(time = ymd("2019-07-05"), weight = 99) %>%
add_row(time = ymd("2019-07-12"), weight = 99.7) %>%
add_row(time = ymd("2019-07-22"), weight = 100.0) %>%
add_row(time = ymd("2019-07-24"), weight = 99.4) %>%
add_row(time = ymd("2019-07-26"), weight = 99.3) %>%
add_row(time = ymd("2019-07-27"), weight = 99.7)
weights %<>%
arrange(time) %>%
mutate(sma = pracma::movavg(weight, n = 3)) # simple moving average
goal_weights <- tibble(
time = seq(ymd("2019-07-28"), ymd("2019-12-15"), by = 'weeks'),
goal_weight = seq(99.5, 84.5, by = -0.75)
)
df <- dplyr::full_join(weights, goal_weights, by = "time")
plot_df <- tidyr::gather(df, key = "line", value = "weight", sma, goal_weight, na.rm= T)
plot_breaks <- seq(update(min(df$time), days = 1),
update(max(df$time), days = 1),
by ='months')
plot_labs <- plot_breaks %>% month(., label = T, abbr = T) %>%
paste0(.," 1")
plot_breaks <- seq(update(min(df$time), days = 1),
update(max(df$time), days = 1),
by ='months')
plot_labs <- plot_breaks %>% month(., label = T, abbr = T) %>%
paste0(.," 1")
ggplot() +
geom_line(data = plot_df, aes(x = time, y = weight, group = line, color = line)) +
geom_point(data = df[!is.na(df$weight),], aes(x = time, y = weight)) +
scale_x_date(breaks = plot_breaks) +
theme_bw() +
theme(legend.title = element_blank(),
legend.position = "top",
axis.text.x = element_text(angle = 45, hjust = 1)) +
labs(xlab = "Weight (kg)", ylab = "Time") +
scale_color_viridis_d(begin = 0.5, end = 0.8, option = "magma")
?ggplot2::scale_x_date
(99.5-85)/0.5
start-day
start_day <- ymd("2019-07-28")
start_day
start_day + weeks(7)
goal_weights <- tibble(
time = seq(start_day,
start_day + (
(current_weight-end_weight)/weight_loss_rate %>%
abs %>% ceiling %>% weeks),
by = 'weeks'),
goal_weight = seq(99.5, 84.5, by = -0.75)
)
end_weight <- 85
current_weight <- 99.5
weight_loss_rate <- -0.5
start_day <- ymd("2019-07-28")
goal_weights <- tibble(
time = seq(start_day,
start_day + (
(current_weight-end_weight)/weight_loss_rate %>%
abs %>% ceiling %>% weeks),
by = 'weeks'),
goal_weight = seq(99.5, 84.5, by = -0.75)
)
goal_weights <- tibble(
time = seq(start_day,
start_day + (
((start_weight-end_weight)/weight_loss_rate) %>%
abs %>% ceiling %>% weeks),
by = 'weeks'),
goal_weight = seq(start_weight,
end_weight,
by = weight_loss_rate)
)
end_weight <- 85
start_weight <- 99.5
weight_loss_rate <- -0.5
start_day <- ymd("2019-07-28")
goal_weights <- tibble(
time = seq(start_day,
start_day + (
((start_weight-end_weight)/weight_loss_rate) %>%
abs %>% ceiling %>% weeks),
by = 'weeks'),
goal_weight = seq(start_weight,
end_weight,
by = weight_loss_rate)
)
((start_weight-end_weight)/weight_loss_rate) %>%
abs %>% ceiling %>% weeks)
((start_weight-end_weight)/weight_loss_rate) %>%
abs %>% ceiling %>% weeks
start_day + (
((start_weight-end_weight)/weight_loss_rate) %>%
abs %>% ceiling %>% weeks)
rm(list = ls())
# start with old weights in pounds:
weights <- tibble(time = ymd("2019-01-04"), weight = 218)
weights %<>%
add_row(time = ymd("2018-01-05"), weight = 217.2) %>%
add_row(time = ymd("2018-01-11"), weight = 219) %>%
add_row(time = ymd("2018-01-14"), weight = 216.4) %>%
add_row(time = ymd("2018-01-17"), weight = 218.8) %>%
add_row(time = ymd("2018-01-21"), weight = 218.2) %>%
add_row(time = ymd("2018-01-24"), weight = 218) %>%
add_row(time = ymd("2018-01-27"), weight = 219.0) %>%
add_row(time = ymd("2018-01-28"), weight = 218.6) %>%
add_row(time = ymd("2018-02-03"), weight = 216.4) %>%
add_row(time = ymd("2018-02-05"), weight = 217.2) %>%
add_row(time = ymd("2018-02-10"), weight = 215.8) %>%
add_row(time = ymd("2018-02-11"), weight = 216.0) %>%
add_row(time = ymd("2018-02-12"), weight = 216.8) %>%
add_row(time = ymd("2018-02-13"), weight = 216.8) %>%
add_row(time = ymd("2018-02-24"), weight = 216.6) %>%
add_row(time = ymd("2018-03-04"), weight = 215.6) %>%
add_row(time = ymd("2018-03-30"), weight = 217.6) %>%
add_row(time = ymd("2018-04-02"), weight = 216.2) %>%
add_row(time = ymd("2018-04-11"), weight = 215.2) %>%
add_row(time = ymd("2018-04-18"), weight = 215.6) %>%
add_row(time = ymd("2018-04-23"), weight = 217.0) %>%
add_row(time = ymd("2018-04-29"), weight = 214.6) %>%
add_row(time = ymd("2018-05-06"), weight = 213.8) %>%
add_row(time = ymd("2018-05-12"), weight = 214.4) %>%
add_row(time = ymd("2018-05-17"), weight = 214) %>%
add_row(time = ymd("2018-05-20"), weight = 212.4) %>%
add_row(time = ymd("2018-06-03"), weight = 211.2) %>%
add_row(time = ymd("2018-06-18"), weight = 212.4) %>%
add_row(time = ymd("2018-06-27"), weight = 214.6 ) %>%
add_row(time = ymd("2018-07-01"), weight = 214.0 ) %>%
add_row(time = ymd("2018-07-06"), weight = 213.2) %>%
add_row(time = ymd("2018-07-10"), weight = 212.6 ) %>%
add_row(time = ymd("2018-07-15"), weight = 213.2) %>%
add_row(time = ymd("2018-07-18"), weight = 211.6) %>%
add_row(time = ymd("2018-07-22"), weight = 209.8) %>%
add_row(time = ymd("2018-07-28"), weight = 209.8 ) %>%
add_row(time = ymd("2018-08-07"), weight = 208.8 ) %>%
add_row(time = ymd("2018-08-16"), weight = 208.4) %>%
add_row(time = ymd("2018-08-20"), weight = 207.2) %>%
add_row(time = ymd("2018-08-31"), weight = 210.6) %>%
add_row(time = ymd("2018-09-02"), weight = 207.2) %>%
add_row(time = ymd("2018-09-05"), weight = 206.6) %>%
add_row(time = ymd("2018-09-17"), weight = 210) %>%
add_row(time = ymd("2018-09-24"), weight = 208.8 ) %>%
add_row(time = ymd("2018-09-28"), weight = 208.2) %>%
add_row(time = ymd("2018-10-03"), weight = 207.2) %>%
add_row(time = ymd("2018-10-09"), weight = 209.6 ) %>%
add_row(time = ymd("2018-10-17"), weight = 209) %>%
add_row(time = ymd("2018-10-21"), weight = 208.4) %>%
add_row(time = ymd("2018-10-25"), weight = 209.4) %>%
add_row(time = ymd("2018-10-28"), weight = 208.2) %>%
add_row(time = ymd("2018-10-30"), weight = 206.6) %>%
add_row(time = ymd("2018-11-04"), weight = 207 ) %>%
add_row(time = ymd("2018-11-08"), weight = 206.2) %>%
add_row(time = ymd("2018-11-11"), weight = 205.4) %>%
add_row(time = ymd("2018-11-18"), weight = 206.8) %>%
add_row(time = ymd("2018-11-23"), weight = 206.6) %>%
add_row(time = ymd("2018-11-27"), weight = 205.6) %>%
add_row(time = ymd("2018-12-02"), weight = 204) %>%
add_row(time = ymd("2018-12-08"), weight = 203.6) %>%
add_row(time = ymd("2018-12-12"), weight = 206 ) %>%
add_row(time = ymd("2018-12-13"), weight = 203) %>%
add_row(time = ymd("2018-12-28"), weight = 215.2) %>%
add_row(time = ymd("2018-12-29"), weight = 213.6) %>%
add_row(time = ymd("2019-01-01"), weight = 210.0) %>%
add_row(time = ymd("2019-01-02"), weight = 212.6) %>%
add_row(time = ymd("2019-01-08"), weight = 209.6) %>%
add_row(time = ymd("2019-01-11"), weight = 213 ) %>%
add_row(time = ymd("2019-01-20"), weight = 214.2) %>%
add_row(time = ymd("2019-01-26"), weight = 214.8) %>%
add_row(time = ymd("2019-01-28"), weight = 214) %>%
add_row(time = ymd("2019-02-04"), weight = 213.2) %>%
add_row(time = ymd("2019-02-11"), weight = 218.2) %>%
add_row(time = ymd("2019-02-12"), weight = 213.8) %>%
add_row(time = ymd("2019-02-13"), weight = 216.6) %>%
add_row(time = ymd("2019-02-16"), weight = 218.8) %>%
add_row(time = ymd("2019-02-18"), weight = 217.4) %>%
add_row(time = ymd("2019-02-21"), weight = 217.4) %>%
add_row(time = ymd("2019-02-24"), weight = 216.8) %>%
add_row(time = ymd("2019-02-26"), weight = 217.2) %>%
add_row(time = ymd("2019-03-02"), weight = 218.4) %>%
add_row(time = ymd("2019-03-05"), weight = 216.2) %>%
add_row(time = ymd("2019-03-08"), weight = 216.2) %>%
add_row(time = ymd("2019-03-19"), weight = 218.4) %>%
add_row(time = ymd("2019-03-22"), weight = 218.4) %>%
add_row(time = ymd("2019-04-09"), weight = 218.2) %>%
add_row(time = ymd("2019-04-13"), weight = 220.6) %>%
add_row(time = ymd("2019-04-23"), weight = 218.4) %>%
add_row(time = ymd("2019-05-04"), weight = 218.2)
# Convert from lbs to kg:
weights %<>%
mutate(weight = weight/2.2046)
weights %<>%
add_row(time = ymd("2019-05-07"), weight = 99) %>%
add_row(time = ymd("2019-05-10"), weight = 98.8) %>%
add_row(time = ymd("2019-05-17"), weight = 98.6) %>%
add_row(time = ymd("2019-05-20"), weight = 98.4) %>%
add_row(time = ymd("2019-06-06"), weight = 99.2) %>%
add_row(time = ymd("2019-06-21"), weight = 99.8) %>%
add_row(time = ymd("2019-07-02"), weight = 99.9) %>%
add_row(time = ymd("2019-07-04"), weight = 100.8) %>%
add_row(time = ymd("2019-07-05"), weight = 99) %>%
add_row(time = ymd("2019-07-12"), weight = 99.7) %>%
add_row(time = ymd("2019-07-22"), weight = 100.0) %>%
add_row(time = ymd("2019-07-24"), weight = 99.4) %>%
add_row(time = ymd("2019-07-26"), weight = 99.3) %>%
add_row(time = ymd("2019-07-27"), weight = 99.7)
weights %<>%
arrange(time) %>%
mutate(sma = pracma::movavg(weight, n = 3)) # simple moving average
end_weight <- 85
start_weight <- 99.5
weight_loss_rate <- -0.75
start_day <- ymd("2019-07-28")
goal_weights <- tibble(
time = seq(start_day,
start_day + (
((start_weight-end_weight)/weight_loss_rate) %>%
abs %>% ceiling %>% weeks),
by = 'weeks'),
goal_weight = seq(start_weight,
end_weight,
by = weight_loss_rate)
)
?seq
weeks(1.5)
start_weight-end_weight
seq(start_weight,
(start_weight -
(((start_weight-end_weight)/weight_loss_rate) %>%
ceiling %>% abs)),
by = weight_loss_rate)
14.5/weight_loss_rate
seq(start_weight,
end_weight + weight_loss_rate-0.01,
by = weight_loss_rate)
?ggplot::labs
?ggplot2::labs
1/60*35*4.5*5
1/60*35*4.5*5*2
1/60*60*4.5*5*2
15*1.09
15*e^(1.09*30)
15*exp(1.09*30)
15*exp(0.09*30)
15*exp(0.06*30)
getwd()
install.packages(here)
install.packages("here")
here::here
here::here()
rre::unregularized_mle
knitr::opts_chunk$set(echo = T, include = T, cache = T, message = F)
knitr::opts_knit$set(root.dir = here::here("data_analysis"))
test <- rre::unregularized_mle(list_of_samples[[1]],
multiplier = 1,
c_seq_len = 2)
library(magrittr)
library(rre)
library(dplyr);
lakes <- readr::read_tsv("./lakes_data.txt") %>% as.data.frame()
lakes_metadata <- readr::read_tsv("./lakes_metadata.txt") %>% as.data.frame()
# goal is to grab a set of samples from the same year and site
get_samples <- function(yr, zone, per = NULL, month = NULL) {
quo_period <- dplyr::enquo(per)
sample_list <- lakes_metadata %>%
dplyr::filter(Site == zone) %>%
dplyr::filter(Years == yr)
if (!is.null(per)) {
sample_list %<>%  dplyr::filter(Period == per)
}
if (!is.null(month)) {
sample_list %<>%  dplyr::filter(Months == month)
}
sample_list %<>% dplyr::select(SampleID) %>% unlist
tables <- lakes[,colnames(lakes) %in% sample_list] %>%
lapply(., rre::make_frequency_count_table)
return(tables)
}
test <- rre::unregularized_mle(list_of_samples[[1]],
multiplier = 1,
c_seq_len = 2)
# Note that one of the metadata files matches no lakes sample ID:  12.07.11.1
list_of_samples <- mapply(get_samples, seq(2009, 2011), "Littoral", "Summer")
test <- rre::unregularized_mle(list_of_samples[[1]],
multiplier = 1,
c_seq_len = 2)
test
report_results <- function(method_output) {
best <- method_output[["best"]]
c_hat <- best$ccc
m <- c_hat/(best$cc_max)
cat(paste0("Chat: ", c_hat, "\n", m, " times greater than observed richness \n Selected lambda: ", best$selected_lambda, "\n"))
}
report_results(test)
report_results <- function(method_output) {
best <- method_output[["best"]]
c_hat <- best$ccc
m <- c_hat/(best$cc_max)
cat(paste0("Chat: ", c_hat, "\n", m, " times greater than observed richness \nSelected lambda: ", best$selected_lambda, "\n"))
}
report_results <- function(method_output) {
}
report_results <- function(method_output) {
best <- method_output[["best"]]
c_hat <- best$ccc
m <- c_hat/(best$cc_max)
cat(paste0("Chat: ", c_hat, "\n", m, " times greater than observed richness \nSelected lambda: ", best$selected_lambda, "\n"))
}
report_results(test)
73360/560
48048/572
57915/715
?rre::gof_criterion
??rre::unregularized_mle
?rre::unregularized_mle
rre::unregularized_mle
rre::cv_replicates
rre::cv_replicates(rre::nb_fct_simulation(100,.1,.1,2),
eval_function = "neg_unreg_like",
lambda_vec = 0,
partitions = 2,
multiplier = 2,
c_seq_len = 2)
rre::unregularized_mle(nb_fct_simulation(100,0.1,0.1,2),
c_seq_len = 2)
knitr::opts_chunk$set(echo = T, include = T, cache = T, message = F, results = 'hide')
knitr::opts_knit$set(root.dir = here::here("data_analysis"))
report_results_2 <- function(method_output, sample, report_eta = F) {
best <- method_output[["best"]]
c_hat <- best$ccc
m <- c_hat/(rre::get_cc_max(sample))
out_text <- paste0("C_hat: ", c_hat, "\n\n",
round(m,2), " times greater than observed richness \n\nSelected lambda: ",
best$selected_lambda, "\n\n")
if (report_eta) {
out_text <- paste0(out_text, "alpha = ", best$alpha_hat, best$alpha,
", delta = ", best$delta_hat, best$delta)
}
cat(out_text)
}
rre::unregularized_mle(nb_fct_simulation(100,0.1,0.1,2),
c_seq_len = 2) %>%
report_results_2(, nb_fct_simulation(100,0.1, 0.1, 2), report_eta = T)
rre::unregularized_mle(nb_fct_simulation(100,0.1,0.1,2),
c_seq_len = 2) %>%
report_results_2(., nb_fct_simulation(100,0.1, 0.1, 2), report_eta = T)
rre::gof_criterion(nb_fct_simulation(100,0.1,0.1,2),
c_seq_len = 2) %>%
report_results_2(., nb_fct_simulation(100,0.1, 0.1, 2), report_eta = T)
library(rre)
?save
